<#include "index.html">
<@rightContainer>
<style>
	.total{
		display: inline-block;
		height: 80px;
		background-color: #009688;
		border: 1px solid #ffffff;
		text-align: center;
		color: #fff;
		padding: 20px 4px;
		font-family: Microsoft Yahei;
		border-radius: 6px;
		margin-left: 15px;
		width: 11%;
		vertical-align: middle;
		word-break:break-word;
		position: relative;
	}
	.total span{
		display:inline-block;
		font-size: 10px;
		margin-top: 15px;
		position: absolute;
		left:0; right:0; bottom:20px;
		margin:auto;
	}
	.total p{
		margin-top: 10px;
	}
	.total p strong{
		font-size: 18px;
	}
</style>
<div class="layui-body site-right">
	<!--Start search toolbar -->
		<fieldset class="layui-elem-field layui-field-title">
		  <legend>统计概览</legend>
		</fieldset>
			<div class="total" style="margin-left:0px;">
				<p><strong>${dailyPayPrice?string("0.00")}</strong> 元</p>
				<span>各渠道当天总金额</span>
			</div>
			<div class="total">
				<p><strong>${dailyCount}</strong> 个</p>
				<span>各渠道当天总数</span>
			</div>
			
			<div class="total">
				<p><strong>${payTotalPrice?string("0.00")}</strong> 元</p>
				<span>各渠道总金额</span>
			</div>
			<div class="total">
				<p><strong>${totalCount}</strong> 个</p>
				<span>各渠道总数</span>
			</div>
  	<fieldset class="layui-elem-field layui-field-title" style="margin-top:30px;">
	</fieldset>
 	<table class="layui-table" lay-even="" lay-skin="row">

	  <thead>
	    <tr>
	      <th>支付类型</th>
	      <th>当天渠道总金额(元)</th>
	      <th>当天渠道总数(个)</th>
	    </tr> 
	  </thead>
	  <tbody>
		<#if listvo?size gt 0>
			<#list listvo as statistical>
			    <tr>
			      <td>
					<#list payModes as payMode> 
						<#if payMode.code==statistical.payMode>
							${payMode.msg} 
						</#if> 
					</#list> 
			      </td>
			      <td>${statistical.channelTotalPrice?string("0.00")}</td>
			      <td>${statistical.channelTotalCount}</td>
			    </tr>
			</#list>
		<#else>
			<tr>
				<td colspan="6" align="center">暂无数据!</td>
		    </tr>
		</#if>
	  </tbody>
	</table> 
	
	<div class="layui-elem-quote">
		当天数据统计截止于:${uTime ? string("yyyy-MM-dd HH:mm:ss")} 
	</div>
	
	<form class="layui-form layui-form-pane" action="${basePath}/statistical"
		method="post">
		<input type="hidden" name="pageNo" value="1" id="pageNo">
	</form>
	<table class="layui-table" lay-even="" lay-skin="row">
	  <thead>
	    <tr>
	      <th>支付类型</th>
	      <th>当天渠道总金额(元)</th>
	      <th>当天渠道总数(个)</th>
	      <th>历史渠道总金额(元)</th>
	      <th>历史渠道总数(个)</th>
	      <td>统计时间</td>
	    </tr> 
	  </thead>
	  <tbody id="pageContent">
		<#if totalDataPage.result?size gt 0>
			<#list totalDataPage.result as totalPage>
			    <tr>
			      <td>
					<#list payModes as payMode> 
						<#if payMode.code == totalPage.payMode>
							${payMode.msg} 
						</#if> 
					</#list> 
			      </td>
			      <td>${totalPage.dailyTotalPrice?string("0.00")}</td>
			      <td>${totalPage.dailyTotalCount}</td>
			      <td>${totalPage.historyTotalPrice?string("0.00")}</td>
			      <td>${totalPage.historyTotalCount}</td>
			      <td>${totalPage.cTime?date("yyyyMMdd")?string("yyyy年MM月dd日")}</td>
			    </tr>
			</#list>
		<#else>
			<tr>
				<td colspan="6" align="center">暂无数据!</td>
		    </tr>
		</#if>
	  </tbody>
	</table>
	<div class="admin-table-page">
		<div id="pagebar"></div>
	</div>
</div>
<script>
layui.use(['laypage', 'layer','jquery','form'], function(){
	  var laypage = layui.laypage ,layer = layui.layer,element=layui.element(), $ = layui.jquery, form = layui.form();
	  laypage({
	    cont: 'pagebar'
	    ,curr:'${totalDataPage.pageNo}'
	    ,pages: '${totalDataPage.totalPage}'
	    ,skip: true
	    ,jump: function(obj, first){
	    	console.log(obj)
	        if(!first){
	        	$('#pageNo').val(obj.curr);
	        	$('form').submit();
	        }
	      }
	  });
})
</script>
</@rightContainer>